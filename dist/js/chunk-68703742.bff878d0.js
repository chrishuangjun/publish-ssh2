(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68703742"],{"1af6":function(e,t,a){var s=a("63b6");s(s.S,"Array",{isArray:a("9003")})},"20fd":function(e,t,a){"use strict";var s=a("d9f6"),i=a("aebd");e.exports=function(e,t,a){t in e?s.f(e,t,i(0,a)):e[t]=a}},"27d4":function(e,t,a){},4573:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-datetime-picker-com"},[a("van-popup",{attrs:{position:"bottom",overlay:""},on:{closed:e.closed},model:{value:e.isShowPopup,callback:function(t){e.isShowPopup=t},expression:"isShowPopup"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:e.confirm,cancel:e.closed}})],1)],1)},i=[],o=a("d225"),r=a("b0b4"),n=a("308d"),c=a("6bb5"),u=a("4e2b"),l=a("9ab4"),d=a("60a3"),p=a("b970"),m=a("8fb6"),f=(a("f0a2"),function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(n["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isShowPopup=e.isShow,e}return Object(u["a"])(t,e),Object(r["a"])(t,[{key:"propIsShowChange",value:function(e){this.isShowPopup=e}},{key:"closed",value:function(){return!1}},{key:"confirm",value:function(e){return this.closed(),m["a"].tranDateFormate(e)}}]),t}(d["d"]));l["a"]([Object(d["c"])({type:Boolean,default:!1})],f.prototype,"isShow",void 0),l["a"]([Object(d["e"])("isShow")],f.prototype,"propIsShowChange",null),l["a"]([Object(d["b"])("update:isShow")],f.prototype,"closed",null),l["a"]([Object(d["b"])()],f.prototype,"confirm",null),f=l["a"]([Object(d["a"])({components:{vanDatetimePicker:p["a"],vanPopup:p["d"]}})],f);var h=f,g=h,v=a("2877"),b=Object(v["a"])(g,s,i,!1,null,null,null);t["a"]=b.exports},"549b":function(e,t,a){"use strict";var s=a("d864"),i=a("63b6"),o=a("241e"),r=a("b0dc"),n=a("3702"),c=a("b447"),u=a("20fd"),l=a("7cd6");i(i.S+i.F*!a("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,i,d,p=o(e),m="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,g=void 0!==h,v=0,b=l(p);if(g&&(h=s(h,f>2?arguments[2]:void 0,2)),void 0==b||m==Array&&n(b))for(t=c(p.length),a=new m(t);t>v;v++)u(a,v,g?h(p[v],v):p[v]);else for(d=b.call(p),a=new m;!(i=d.next()).done;v++)u(a,v,g?r(d,h,[i.value,v],!0):i.value);return a.length=v,a}})},"54a1":function(e,t,a){a("6c1c"),a("1654"),e.exports=a("95d5")},"5b4d":function(e,t,a){a("a29f"),a("911e")},7187:function(e,t,a){},"774e":function(e,t,a){e.exports=a("d2d5")},"911e":function(e,t,a){},"95d5":function(e,t,a){var s=a("40c3"),i=a("5168")("iterator"),o=a("481b");e.exports=a("584a").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(s(t))}},a745:function(e,t,a){e.exports=a("f410")},b466:function(e,t,a){"use strict";var s=a("7187"),i=a.n(s);i.a},b71e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("m-content",[a("m-form",[a("m-form-row",{attrs:{label:"公司名称"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.orgName,expression:"model.orgName"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请输入公司名称"},domProps:{value:e.model.orgName},on:{blur:function(t){return e.removeSpace("model.orgName",t)},input:function(t){t.target.composing||e.$set(e.model,"orgName",t.target.value)}}})]),a("m-form-row",{attrs:{label:"证件类型"}},[e._v("营业执照")]),a("m-form-row",{attrs:{label:"统一社会信用代码"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.orgNo,expression:"model.orgNo"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请输入统一社会信用代码"},domProps:{value:e.model.orgNo},on:{blur:function(t){return e.removeSpace("model.orgNo",t)},input:function(t){t.target.composing||e.$set(e.model,"orgNo",t.target.value)}}})]),a("m-form-row",{attrs:{label:"一级营业类型"},nativeOn:{click:function(t){return e.showBusTypePicerHandle(e.busTypeEnumList.first)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.firstSelectBusTypeData.desc,expression:"firstSelectBusTypeData.desc"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请选择一级经营类型",readonly:""},domProps:{value:e.firstSelectBusTypeData.desc},on:{input:function(t){t.target.composing||e.$set(e.firstSelectBusTypeData,"desc",t.target.value)}}}),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("m-form-row",{attrs:{label:"二级营业类型"},nativeOn:{click:function(t){return e.showBusTypePicerHandle(e.busTypeEnumList.second)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.secondSelectBusTypeData.desc,expression:"secondSelectBusTypeData.desc"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请选择二级经营类型",readonly:""},domProps:{value:e.secondSelectBusTypeData.desc},on:{input:function(t){t.target.composing||e.$set(e.secondSelectBusTypeData,"desc",t.target.value)}}}),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("m-form-row",{attrs:{label:"经营地区范围"}},[a("buss-range",{attrs:{curValStr:e.busAreaOrageStr},on:{change:e.changeBusAreaHandle}})],1),a("m-form-row",{attrs:{label:"注册资本"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.registeredCapital,expression:"model.registeredCapital"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请输入注册资本"},domProps:{value:e.model.registeredCapital},on:{blur:function(t){return e.onlyNum("model.registeredCapital",t)},input:function(t){t.target.composing||e.$set(e.model,"registeredCapital",t.target.value)}}})]),a("m-form-row",{attrs:{label:"注册地址"},nativeOn:{click:function(t){e.isShowAreaPicker=!0}}},[e._v("\n            "+e._s(e.registerRegionStr?e.registerRegionStr:"请选择")+"\n            "),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("m-form-row",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.orgRegiesterAddress,expression:"model.orgRegiesterAddress"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"输入详细地址（填写至门牌号）"},domProps:{value:e.model.orgRegiesterAddress},on:{blur:function(t){return e.removeSpace("model.orgRegiesterAddress",t)},input:function(t){t.target.composing||e.$set(e.model,"orgRegiesterAddress",t.target.value)}}})]),a("m-form-row",{attrs:{label:"成立时间"},nativeOn:{click:function(t){e.isShowDateTimePicker=!0}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.createTime,expression:"model.createTime"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请选择成立时间",readonly:""},domProps:{value:e.model.createTime},on:{input:function(t){t.target.composing||e.$set(e.model,"createTime",t.target.value)}}}),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("m-form-row",{attrs:{label:"拍照上传营业执照",labelWidth:"250"}},[a("column-upload-file",{attrs:{picDataUrl:e.licensePicDataUrl},on:{change:e.changeUploadFile}})],1)],1),a("p",{staticClass:"tips mt-30 mr-20"},[e._v("请核对营业执照信息")]),a("button",{staticClass:"btn btn-lg btn-blue btn-radius btn-center mt-80",attrs:{type:"button",disabled:e.isDisForm},on:{click:e.submit}},[e._v("下一步")]),a("datetime-picker",{attrs:{isShow:e.isShowDateTimePicker},on:{"update:isShow":function(t){e.isShowDateTimePicker=t},"update:is-show":function(t){e.isShowDateTimePicker=t},confirm:e.confirmDateTimePicker}}),a("m-picker",{attrs:{isShow:e.isShowBusTypePicker,columns:e.curScopes,"value-key":"desc"},on:{"update:isShow":function(t){e.isShowBusTypePicker=t},"update:is-show":function(t){e.isShowBusTypePicker=t},confirm:e.confirmBusTypePicker}}),a("area-picker",{attrs:{isShow:e.isShowAreaPicker,title:"请选择注册地址"},on:{"update:isShow":function(t){e.isShowAreaPicker=t},"update:is-show":function(t){e.isShowAreaPicker=t},select:e.selectReginPicker}})],1)},i=[],o=a("cebc"),r=a("a745"),n=a.n(r);function c(e){if(n()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var u=a("774e"),l=a.n(u),d=a("c8bb"),p=a.n(d);function m(e){if(p()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return l()(e)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){return c(e)||m(e)||f()}a("28a5");var g=a("d225"),v=a("b0b4"),b=a("308d"),y=a("6bb5"),S=a("4e2b"),w=a("9ab4"),k=a("4573"),P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-popup",{attrs:{position:"bottom",overlay:""},on:{closed:e.closed},model:{value:e.isShowPopup,callback:function(t){e.isShowPopup=t},expression:"isShowPopup"}},[a("van-picker",{attrs:{"item-height":44,"value-key":e.valueKey,"show-toolbar":"","confirm-button-text":"确认",columns:e.columns},on:{confirm:e.confirmSelected,cancel:e.cancelSelected,change:e.changeHandle}})],1)},T=[],B=(a("5b4d"),a("b970")),D=a("60a3"),O=function(e){function t(){var e;return Object(g["a"])(this,t),e=Object(b["a"])(this,Object(y["a"])(t).apply(this,arguments)),e.isShowPopup=e.isShow,e}return Object(S["a"])(t,e),Object(v["a"])(t,[{key:"propIsShowChange",value:function(e){this.isShowPopup=e}},{key:"closed",value:function(){return!1}},{key:"changeHandle",value:function(){}},{key:"confirmSelected",value:function(e,t){return this.closed(),e}},{key:"cancelSelected",value:function(){this.closed()}}]),t}(D["d"]);w["a"]([Object(D["c"])(String)],O.prototype,"valueKey",void 0),w["a"]([Object(D["c"])(Boolean)],O.prototype,"isShow",void 0),w["a"]([Object(D["c"])(Array)],O.prototype,"columns",void 0),w["a"]([Object(D["e"])("isShow")],O.prototype,"propIsShowChange",null),w["a"]([Object(D["b"])("update:isShow")],O.prototype,"closed",null),w["a"]([Object(D["b"])("change")],O.prototype,"changeHandle",null),w["a"]([Object(D["b"])("confirm")],O.prototype,"confirmSelected",null),O=w["a"]([Object(D["a"])({components:{vanPopup:B["d"],vanPicker:B["c"]}})],O);var j=O,C=j,A=a("2877"),R=Object(A["a"])(C,P,T,!1,null,null,null),N=R.exports,x=a("dae6"),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"buss-range-com"},[a("div",{on:{click:function(t){e.isShowBusAreaSinglePage=!0}}},[e._v("\n        "+e._s(e.curValStr?e.curValStr:"请选择")+"\n        "),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("single-page",{attrs:{isShow:e.isShowBusAreaSinglePage},on:{"update:isShow":function(t){e.isShowBusAreaSinglePage=t},"update:is-show":function(t){e.isShowBusAreaSinglePage=t}}},[a("section",{staticClass:"province-list"},[a("ul",{staticClass:"clearBoth"},e._l(e.allProvinces,function(t){return a("li",{key:t.areaCode,class:{active:t.isSelected},on:{click:function(a){return e.chooseProvinceHandle(t)}}},[e._v("\n                    "+e._s(t.areaName)+"\n                ")])}),0)]),a("div",{staticClass:"fixed"},[a("button",{staticClass:"btn btn-md btn-blue btn-radius btn-center",attrs:{type:"button"},on:{click:function(t){e.isShowBusAreaSinglePage=!1}}},[e._v("确定")])])])],1)},I=[],_=a("ca4c"),F=function(e){function t(){var e;return Object(g["a"])(this,t),e=Object(b["a"])(this,Object(y["a"])(t).apply(this,arguments)),e.isShowBusAreaSinglePage=!1,e.allProvinces=[],e}return Object(S["a"])(t,e),Object(v["a"])(t,[{key:"chooseProvinceHandle",value:function(e){return e.isSelected=!e.isSelected,this.allProvinces.filter(function(e){return e.isSelected})}},{key:"created",value:function(){var e=this;this.$post(this.api.loadProvince,{code:"110000"}).then(function(t){t.isSuccess?(t.data.map(function(e){e.isSelected=!1}),e.allProvinces=t.data):e.$toast(t.message)})}}]),t}(D["d"]);w["a"]([Object(D["c"])(String)],F.prototype,"curValStr",void 0),w["a"]([Object(D["b"])("change")],F.prototype,"chooseProvinceHandle",null),F=w["a"]([Object(D["a"])({components:{singlePage:_["a"]}})],F);var L,U=F,E=U,H=(a("d797"),Object(A["a"])(E,$,I,!1,null,"f9f0e1a4",null)),V=H.exports,J=a("a840"),K=a("62f2"),M=a("8fb6");(function(e){e[e["empty"]=0]="empty",e[e["first"]=1]="first",e[e["second"]=2]="second"})(L||(L={}));var W=function(e){function t(){var e;return Object(g["a"])(this,t),e=Object(b["a"])(this,Object(y["a"])(t).apply(this,arguments)),e.model={orgName:"",orgNo:"",orgRegiesterAddress:"",createTime:"",registeredCapital:""},e.isShowDateTimePicker=!1,e.busTypeEnumList=L,e.busTypeCurIndx=L.empty,e.isShowBusTypePicker=!1,e.scopesLevel1=[],e.scopesLevel2=[],e.curScopes=[],e.firstSelectBusTypeData={code:0,desc:""},e.secondSelectBusTypeData={code:0,desc:""},e.curBusRangeData=[],e.isShowAreaPicker=!1,e.curRegionData=[],e.representName="",e.representNo="",e.isContact="",e.cardImgId="",e.licensePicDataUrl="",e}return Object(S["a"])(t,e),Object(v["a"])(t,[{key:"mounted",value:function(){this.getInfoByAjax(),this.fetchBusTypeScopes()}},{key:"getInfoByAjax",value:function(){var e=this;this.$post(this.api.loadEnterprise).then(function(t){if(!t.isSuccess)return e.$toast(t.message);if(t.data){for(var a in e.model)t.data[a]&&(e.model[a]=t.data[a]);e.representName=t.data.representName,e.representNo=t.data.representNo,e.isContact=t.data.isContact,e.firstSelectBusTypeData={code:t.data.businessType1,desc:t.data.businessTypeName1},e.secondSelectBusTypeData={code:t.data.businessType2,desc:t.data.businessTypeName2};var s=t.data.businessRangeName.split(","),i=[];s.map(function(e){i.push({areaCode:"",areaName:e})}),e.curBusRangeData=i,e.curRegionData=[{areaCode:t.data.orgRegiesterProvince,areaName:t.data.orgRegiesterProvinceStr},{areaCode:t.data.orgRegiesterCity,areaName:t.data.orgRegiesterCityStr},{areaCode:t.data.orgRegiesterArea,areaName:t.data.orgRegiesterAreaStr}],t.data.cardImgId&&e.getImgInfoByBack(t.data.cardImgId)}})}},{key:"getImgInfoByBack",value:function(e){var t=this;this.$post(this.api.downloadImg,{docId:e}).then(function(e){if(!e.isSuccess)return t.$toast(e.message);t.licensePicDataUrl=e.data})}},{key:"fetchBusTypeScopes",value:function(){var e=this;this.$get(this.api.fetchBusScopeL1).then(function(t){t.isSuccess?e.scopesLevel1=h(t.data):e.$toast(t.message)})}},{key:"confirmDateTimePicker",value:function(e){this.model.createTime=e.f}},{key:"showBusTypePicerHandle",value:function(e){this.busTypeCurIndx=e,e===L.first?this.showFirstBusType():this.showSecondBusType()}},{key:"showFirstBusType",value:function(){this.curScopes=this.scopesLevel1,this.isShowBusTypePicker=!0}},{key:"confirmBusTypePicker",value:function(e){this.busTypeCurIndx===this.busTypeEnumList.first?this.confirmFirstBusTypePicker(e):this.confirmSecondBusTypePicker(e)}},{key:"confirmFirstBusTypePicker",value:function(e){e.code?e.subTypes?(this.firstSelectBusTypeData=e,this.scopesLevel2=e.subTypes,this.secondSelectBusTypeData={code:0,desc:""}):this.$toast("所选择行业没有subTypes字段"):this.$toast("所选择行业没有code字段")}},{key:"confirmSecondBusTypePicker",value:function(e){e.code?this.secondSelectBusTypeData=e:this.$toast("所选择行业没有code字段")}},{key:"showSecondBusType",value:function(){this.firstSelectBusTypeData.code?(this.curScopes=this.scopesLevel2,this.isShowBusTypePicker=!0):this.$toast("请先选择一级营业范围")}},{key:"selectReginPicker",value:function(e){this.curRegionData=e}},{key:"changeUploadFile",value:function(e){this.licensePicDataUrl=e.dataUrl}},{key:"submit",value:function(){this.uploadBusinLicePic()}},{key:"retModelParams",value:function(){return Object(o["a"])({},this.model,{businessTypeName1:this.firstSelectBusTypeData.desc,businessType1:this.firstSelectBusTypeData.code,businessTypeName2:this.secondSelectBusTypeData.desc,businessType2:this.secondSelectBusTypeData.code,businessRangeName:this.busAreaOrageStr,orgRegiesterProvince:this.curRegionData[0].areaCode,orgRegiesterProvinceStr:this.curRegionData[0].areaName,orgRegiesterCity:this.curRegionData[1].areaCode,orgRegiesterCityStr:this.curRegionData[1].areaName,orgRegiesterArea:this.curRegionData[2].areaCode,orgRegiesterAreaStr:this.curRegionData[2].areaName,orgRegiesterAllAddress:"".concat(this.registerRegionStr).concat(this.model.orgRegiesterAddress),cardImgId:this.cardImgId})}},{key:"saveData2Ajax",value:function(){var e=this,t=this.retModelParams();this.$post(this.api.storeEnterprise,Object(o["a"])({},t)).then(function(t){if(!t.isSuccess)return e.$toast(t.message);"1"===e.isContact?e.$router.$push("/certify/bankAccount"):e.$router.$push("/certify/contactOCR")})}},{key:"uploadBusinLicePic",value:function(){var e=this,t=M["a"].getPicBlobByDataUrl(this.licensePicDataUrl);this.$postFormData(this.api.uploadImg,{file:t}).then(function(t){return t.isSuccess?t.data?(e.cardImgId=t.data,void e.saveData2Ajax()):e.$toast("接口没有放回docId"):e.$toast(t.message)})}},{key:"changeBusAreaHandle",value:function(e){this.curBusRangeData=e}},{key:"isDisForm",get:function(){var e=Object(o["a"])({},this.model,{firstBusTypeCode:this.firstSelectBusTypeData.desc,secondBusTypeCode:this.secondSelectBusTypeData.desc,busAreaOrageStr:this.busAreaOrageStr,registerRegionStr:this.registerRegionStr,licensePicDataUrl:this.licensePicDataUrl});return!M["a"].checkForm(e)}},{key:"registerRegionStr",get:function(){var e="";return this.curRegionData.length&&this.curRegionData.map(function(t){e+=t.areaName}),e}},{key:"busAreaOrageStr",get:function(){var e="";return this.curBusRangeData.length&&(this.curBusRangeData.map(function(t){e+="".concat(t.areaName,",")}),e=e.substr(0,e.length-1)),e}}]),t}(D["d"]);W=w["a"]([Object(D["a"])({components:{columnUploadFile:K["a"],datetimePicker:k["a"],mPicker:N,bussRange:V,areaPicker:x["a"]},mixins:[J["a"]]})],W);var q=W,z=q,G=(a("b466"),Object(A["a"])(z,s,i,!1,null,"2b435838",null));t["default"]=G.exports},c8bb:function(e,t,a){e.exports=a("54a1")},d2d5:function(e,t,a){a("1654"),a("549b"),e.exports=a("584a").Array.from},d797:function(e,t,a){"use strict";var s=a("27d4"),i=a.n(s);i.a},f0a2:function(e,t,a){a("a29f"),a("911e")},f410:function(e,t,a){a("1af6"),e.exports=a("584a").Array.isArray}}]);