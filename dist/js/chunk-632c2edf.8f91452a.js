(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-632c2edf"],{"11d3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-content",[a("div",{staticClass:"available-credit"},[a("p",{staticClass:"ava-credit-txt"},[t._v("可用额度")]),a("p",{staticClass:"ava-credit"},[t._v(t._s(t._f("formatMoney")(t.availableQuota)))]),a("div",{staticClass:"rate"},[t._v("\n      贷款利率：\n      "),a("strong",[t._v("12.11%")])])]),a("m-form",[a("m-form-row",{attrs:{label:"申请金额(元)"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.submitParams.amount,expression:"submitParams.amount"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请输入贷款金额"},domProps:{value:t.submitParams.amount},on:{input:function(e){e.target.composing||t.$set(t.submitParams,"amount",e.target.value)}}})]),a("m-form-row",{attrs:{label:"用款期限(月)"},nativeOn:{click:function(e){return t.showLoanTermPicker(e)}}},[t._v("\n      "+t._s(t.submitParams.loanTerm)+"\n      "),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("m-form-row",{attrs:{label:"首期还款"},nativeOn:{click:function(e){return t.lookPaymentDetail(e)}}},[a("div",{staticClass:"first-phase"},[a("p",{staticClass:"amout"},[t._v(t._s(t._f("formatMoney")(t.firstPayPlan.instmAmt)))]),a("p",{staticClass:"date"},[t._v(t._s(t._f("tranDateFormate")(t.firstPayPlan.dueDt)))])]),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("m-form-row",{attrs:{label:"还款方式"},nativeOn:{click:function(e){return t.showPayMethodPicker(e)}}},[t._v("\n      "+t._s(t.submitParams.repayeeType)+"\n      "),a("i",{staticClass:"form-tail-ic iconfont icon-arrow-right"})]),a("m-form-row",{attrs:{label:"短信验证码"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],staticClass:"credit-input",attrs:{type:"text",placeholder:"请输入短信验证码"},domProps:{value:t.smsCode},on:{input:function(e){e.target.composing||(t.smsCode=e.target.value)}}}),a("send-sms-btn",{staticClass:"ml-10",attrs:{"is-disabled":!1},on:{getSecurityCode:t.sendSMS}})],1)],1),t.isShowPicker?a("div",{staticClass:"mask"},[a("van-picker",{attrs:{"item-height":44,"value-key":"desc","show-toolbar":"","confirm-button-text":"确认",columns:t.cols},on:{confirm:t.confirmSelected,cancel:t.cancelSelected}})],1):t._e(),a("button",{staticClass:"btn btn-lg btn-blue btn-radius btn-center mt-60",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交申请")])],1)},i=[],s=a("d225"),o=a("b0b4"),r=a("308d"),c=a("6bb5"),l=a("4e2b"),u=a("9ab4"),d=a("60a3"),m=a("2245"),h=a("b970"),f=(a("5b4d"),a("8fb6"));d["d"].use(h["c"]);var p=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.smsCode="",t.sendBtnState=2,t.availableQuota=28e3,t.pickerType="loanTerm",t.submitParams={amount:0,repayeeType:"请选择还款方式",loanTerm:"请选择贷款期限"},t.loanTerms=[],t.payMethods=[],t.isShowPicker=!1,t.firstPayPlan={instmAmt:2400,dueDt:(new Date).getTime()},t}return Object(l["a"])(e,t),Object(o["a"])(e,[{key:"goChooseGatherAccountPage",value:function(){this.$router.$push("/wx/useMoney/gatheringAccount")}},{key:"lookPaymentDetail",value:function(){this.$router.$push("/wx/useMoney/paymentPlan")}},{key:"sendSMS",value:function(){console.log("请求短信验证码："),this.$get(this.api.sendCode,{username:"SG000065501",mobile:"13829987689"}).then(function(t){console.log("短信验证发送成功",t)})}},{key:"created",value:function(){this.availableQuota=+this.$route.query.availableQuota||1e4,this.submitParams.amount=+this.$route.query.toPayAmt||1e3,this.fetchPayMethods(),this.fetchLoanLimit()}},{key:"fetchPayMethods",value:function(){var t=this;this.$get(this.api.fetchPayMethods,{}).then(function(e){console.log("还款方式：",e),t.payMethods=e.data})}},{key:"submit",value:function(){var t=this;this.$get(this.api.verifyCode,{username:"SG000065501",mobile:"13829987689",veriCode:this.smsCode}).then(function(e){console.log("验证验证码成功",e),t.$get(t.api.submitOrder,t.submitParams).then(function(e){console.log("用信支付提交成功：",e),t.$router.$replace("/wx/useMoney/applySuccess")})})}},{key:"confirmSelected",value:function(t){console.log("confirmSelected:",t),"loanTerm"===this.pickerType?this.submitParams.loanTerm=t:this.submitParams.repayeeType=t.desc,this.hidePicker()}},{key:"cancelSelected",value:function(){console.log("cancelSelected:"),this.hidePicker()}},{key:"hidePicker",value:function(){this.isShowPicker=!1}},{key:"showLoanTermPicker",value:function(){this.isShowPicker=!0,this.pickerType="loanTerm"}},{key:"showPayMethodPicker",value:function(){this.isShowPicker=!0,this.pickerType="repayeeType"}},{key:"fetchRepayeePlan",value:function(){var t=this;this.$get(this.api.fetchRepayeePlan,{}).then(function(e){console.log("还款计划列表：",e),t.firstPayPlan.instmAmt=e.data[0].instmAmt,t.firstPayPlan.dueDt=e.data[0].dueDt})}},{key:"fetchLoanLimit",value:function(){var t=this;this.$get(this.api.fetchLoanLimit,{}).then(function(e){console.log("获取贷款期限结果：",e);for(var a=e.data[0],n=a.loanMinTerm;n<=a.loanMaxTerm;n++)t.loanTerms.push(n)})}},{key:"cols",get:function(){return"repayeeType"===this.pickerType?this.payMethods:this.loanTerms}}]),e}(d["d"]);p=u["a"]([Object(d["a"])({components:{sendSmsBtn:m["a"]},filters:{tranDateFormate:function(t){var e=new Date(t),a=f["a"].tranDateFormate(e);return a.f}}})],p);var b=p,y=b,v=(a("9202"),a("2877")),g=Object(v["a"])(y,n,i,!1,null,"4da47b56",null);e["default"]=g.exports},2245:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"send-sms-btn-component"},[a("button",{staticClass:"btn btn-send btn-sm btn-radius btn-white",attrs:{type:"button",disabled:!t.isSending&&t.isDisabled},on:{click:t.send}},[t.isSending?[t._v(t._s(t.second)+"s")]:t.isCanReSend?[t._v("再次发送")]:[t._v("点击发送")]],2)])},i=[],s=(a("c5f6"),a("d225")),o=a("b0b4"),r=a("308d"),c=a("6bb5"),l=a("4e2b"),u=a("9ab4"),d=a("60a3"),m=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isCanReSend=!1,t.timer=0,t.second=t.totalTime,t}return Object(l["a"])(e,t),Object(o["a"])(e,[{key:"getSecurityCode",value:function(){}},{key:"updateIsSendIng",value:function(t){return t}},{key:"isSendingChangeHandle",value:function(t){t&&this.startDownCount()}},{key:"send",value:function(){this.isSending||this.isDisabled||this.getSecurityCode()}},{key:"startDownCount",value:function(){var t=this;this.clearInter(),this.second=this.totalTime,this.timer=setInterval(function(){0===--t.second&&(t.clearInter(),t.isCanReSend=!0,t.updateIsSendIng(!1))},1e3)}},{key:"clearInter",value:function(){this.timer&&clearInterval(this.timer)}}]),e}(d["d"]);u["a"]([Object(d["c"])({type:Number,default:2})],m.prototype,"totalTime",void 0),u["a"]([Object(d["c"])({type:Boolean,default:!0})],m.prototype,"isDisabled",void 0),u["a"]([Object(d["c"])({type:Boolean,default:!1})],m.prototype,"isSending",void 0),u["a"]([Object(d["b"])("getSecurityCode")],m.prototype,"getSecurityCode",null),u["a"]([Object(d["b"])("update:isSending")],m.prototype,"updateIsSendIng",null),u["a"]([Object(d["e"])("isSending")],m.prototype,"isSendingChangeHandle",null),m=u["a"]([d["a"]],m);var h=m,f=h,p=(a("db87"),a("2877")),b=Object(p["a"])(f,n,i,!1,null,"69c7d03c",null);e["a"]=b.exports},"5b4d":function(t,e,a){a("a29f"),a("911e")},6593:function(t,e,a){},"911e":function(t,e,a){},9202:function(t,e,a){"use strict";var n=a("d610"),i=a.n(n);i.a},d610:function(t,e,a){},db87:function(t,e,a){"use strict";var n=a("6593"),i=a.n(n);i.a}}]);